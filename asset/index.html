<!doctype html>
<html>
<head>
  <title>Socket.IO chat</title>
  <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; }
      form { background: #000; padding: 3px; position: fixed; bottom: 0; width: 100%; }
      form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }
      form button { width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; }
      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 5px 10px; }
      #messages li:nth-child(odd) { background: #eee; }

      /*#map {
        position: relative;
      }

      div {
        position: relative;
        display: block;
      }*/

    </style>
    <script src="/jquery-1.11.1.js"></script>
    <script>
        document.write("<h1 id=\"turn_text\"> User1's turn </h1>");
        $(document).ready(function() {
            $('#turn_text').show();

        });

    </script>

</head>




<button id="deployBtn"> Deploy 1 unit </button>


<img id="map" src="map-with-names.jpg" border="0" width="1920" height="1080" orgWidth="1920" orgHeight="1080" usemap="#gameMap" alt="" />
<map name="gameMap" id="gamingMap">
    <area  alt="" title="" href="alaska.html" shape="rect" coords="20,113,136,215"  target="_self" id="Alaska" />
    <area  alt="" title="" href="North_west.html" shape="rect" coords="168,132,322,187" target="_self"   id="North_West"  />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="171,209,276,291" target="_self"  id="Alberta"   />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="292,197,380,298"  target="_self"    id="Ontario" />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="180,307,306,389"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="316,343,408,430"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="400,219,492,306"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="446,22,638,180"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="206,490,322,570"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="438,647,560,767"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="294,582,445,635"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="341,855,456,988"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="329,739,406,788"  target="_self"   id="Greenland"  />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="624,623,794,774"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="806,602,915,650"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="878,679,978,770"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="801,918,944,1052"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="832,788,906,850"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="974,930,1072,1012"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="610,461,727,555"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="729,306,846,400"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="749,433,866,527"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="578,292,695,386"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="643,175,723,240"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="738,127,862,244"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="876,234,990,425"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="952,501,1076,660"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1045,354,1124,456"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1085,194,1152,320"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1170,75,1244,235"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1279,217,1340,297"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1268,337,1376,404"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1203,437,1373,511"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1132,531,1219,693"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1263,584,1350,665"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1418,100,1545,181"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1434,715,1534,796"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1255,750,1411,857"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1335,909,1435,1016"  target="_self"     />
    <area  alt="" title="" href="http://www.image-maps.com/" shape="rect" coords="1516,842,1606,1043"  target="_self"     />
    <area shape="rect" coords="1918,1078,1920,1080" alt="Image Map"  title="Image Map" href="http://www.image-maps.com/index.php?aff=mapped_users_0" />
</map>



<script src="/socket.io-1.3.7.js"></script>

<script>
$(document).ready(function() {

    $.getJSON('users.json', {
        format: "json"
    }).done(function(dataUsers) {

        user1_units_to_deploy = dataUsers["users"]["user1"]["units_to_deploy"];
        //user.units_to_deploy = data;
        });


    function deployBtn(countryKeyOwner) {
        countryKeyOwner = 1; //Przypisanie właściciela regionowi
        do { //Początek pętli
            user1_units_to_deploy -= 1;
            var socket = io();
            socket.emit('testowy_event', JSON.stringify(user1_units_to_deploy), function(data){
            console.log('ACK from server wtih data: ', data);
 });
            console.log(user1_units_to_deploy);
            if (user1_units_to_deploy === 0) {
                $('#deployBtn').remove(); //Albo hide()
            }
            break; //Przerwanie pętli
        } while (user1_units_to_deploy < 0) //Warunek i koniec pętli

    }; // Koniec funkcji deployBtn




    $('#deployBtn').click(function() {
        //$('area').unbind('click'); // Funkcja cofająca wywołanie PreventDefault();

        deployBtn();


    });

var userName = "Ignacy";


var user = {
    turn: "",
    units_to_deploy: 25,
    color: "",
    getUnits: function () {
        return this.units_to_deploy;
    }
}








    var socket = io();
    socket.emit('testowy_event', JSON.stringify(user.units_to_deploy), function(data){
       alert(user.units_to_deploy);
       console.log('ACK from server wtih data: ', data);
 });

}); // Koniec funkcji ready
    </script>
</body>
</html>
